# å•å‘GANè®­ç»ƒè¿è¡Œå‘½ä»¤

## ğŸ¯ å•å‘GAN

ä¸“æ³¨äº**ä¾§é¢â†’æ­£é¢**ç‰¹å¾è½¬æ¢ï¼Œè®­ç»ƒæ›´å¿«ï¼Œå‚æ•°æ›´å°‘ã€‚

### åŸºç¡€å‘½ä»¤

```bash
python train_transformer3D/gan_train.py --data_dir train/datas/file
```

### å®Œæ•´æ¨èå‘½ä»¤

```bash
python train_transformer3D/gan_train.py \
    --data_dir train/datas/file \
    --batch_size 32 \
    --epochs 150 \
    --lr_G 4e-4 \
    --lr_D 1e-4 \
    --lambda_pair 10.0 \
    --lambda_identity 0.5 \
    --lambda_adversarial 2.0 \
    --generator_type decoder_only \
    --discriminator_type patch \
    --use_lsgan \
    --use_mixed_precision \
    --num_workers 4
```

### Windows PowerShellå‘½ä»¤

```powershell
python train_transformer3D/gan_train.py `
    --data_dir train/datas/file `
    --batch_size 32 `
    --epochs 150 `
    --lr_G 4e-4 `
    --lr_D 1e-4 `
    --lambda_pair 10.0 `
    --lambda_identity 0.5 `
    --lambda_adversarial 2.0 `
    --generator_type decoder_only `
    --discriminator_type patch `
    --use_lsgan `
    --use_mixed_precision `
    --num_workers 4
```

### Windows CMDå‘½ä»¤

```cmd
python train_transformer3D/gan_train.py ^
    --data_dir train/datas/file ^
    --batch_size 32 ^
    --epochs 150 ^
    --lr_G 4e-4 ^
    --lr_D 1e-4 ^
    --lambda_pair 10.0 ^
    --lambda_identity 0.5 ^
    --lambda_adversarial 2.0 ^
    --generator_type decoder_only ^
    --discriminator_type patch ^
    --use_lsgan ^
    --use_mixed_precision ^
    --num_workers 4
```

---

## ğŸ“‹ å‚æ•°è¯´æ˜

### å¿…éœ€å‚æ•°

- `--data_dir`: æ•°æ®ç›®å½•ï¼ˆåŒ…å«front_*.npyå’Œvideo_*.npyæ–‡ä»¶ï¼‰

### å¯é€‰å‚æ•°ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--batch_size` | 16 | æ‰¹æ¬¡å¤§å°ï¼ˆå»ºè®®16-32ï¼‰ |
| `--epochs` | 100 | è®­ç»ƒè½®æ•° |
| `--lr_G` | 4e-4 | ç”Ÿæˆå™¨å­¦ä¹ ç‡ |
| `--lr_D` | 1e-4 | åˆ¤åˆ«å™¨å­¦ä¹ ç‡ |
| `--lambda_pair` | 10.0 | é…å¯¹æŸå¤±æƒé‡ï¼ˆç”Ÿæˆçš„æ­£é¢ç‰¹å¾ä¸çœŸå®æ­£é¢ç‰¹å¾çš„å·®å¼‚ï¼‰ |
| `--lambda_identity` | 0.5 | èº«ä»½æŸå¤±æƒé‡ï¼ˆ0è¡¨ç¤ºç¦ç”¨ï¼‰ |
| `--lambda_adversarial` | 2.0 | å¯¹æŠ—æŸå¤±æƒé‡ |
| `--generator_type` | decoder_only | ç”Ÿæˆå™¨ç±»å‹ï¼ˆdecoder_only/encoder_decoder/angle_warpingï¼‰ |
| `--discriminator_type` | patch | åˆ¤åˆ«å™¨ç±»å‹ï¼ˆsimple/patchï¼‰ |
| `--use_lsgan` | True | ä½¿ç”¨LSGANæŸå¤±ï¼ˆå¦åˆ™ä½¿ç”¨BCEï¼‰ |
| `--use_mixed_precision` | False | ä½¿ç”¨æ··åˆç²¾åº¦è®­ç»ƒ |
| `--num_workers` | 4 | æ•°æ®åŠ è½½å™¨å·¥ä½œè¿›ç¨‹æ•° |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„å‘½ä»¤ï¼ˆä½¿ç”¨æ‰€æœ‰é»˜è®¤å€¼ï¼‰

**å•å‘GAN**ï¼š
```bash
python train_transformer3D/gan_train.py --data_dir train/datas/file
```

---

## ğŸ’¡ æ¨èé…ç½®

### æ¨èé…ç½®

```bash
python train_transformer3D/gan_train.py \
    --data_dir train/datas/file \
    --batch_size 32 \
    --epochs 150 \
    --lr_G 4e-4 \
    --lr_D 1e-4 \
    --lambda_pair 10.0 \
    --lambda_identity 0.5 \
    --lambda_adversarial 2.0 \
    --use_lsgan \
    --use_mixed_precision
```

### å¦‚æœæ˜¾å­˜ä¸è¶³

```bash
python train_transformer3D/gan_train.py \
    --data_dir train/datas/file \
    --batch_size 16 \
    --epochs 150 \
    --lr_G 4e-4 \
    --lr_D 1e-4 \
    --lambda_pair 10.0 \
    --lambda_identity 0.5 \
    --lambda_adversarial 2.0 \
    --use_lsgan \
    --use_mixed_precision
```

### å¦‚æœè®­ç»ƒä¸ç¨³å®šï¼ˆåˆ¤åˆ«å™¨å¤ªå¼ºï¼‰

```bash
python train_transformer3D/gan_train.py \
    --data_dir train/datas/file \
    --batch_size 32 \
    --epochs 150 \
    --lr_G 6e-4 \
    --lr_D 5e-5 \
    --lambda_pair 10.0 \
    --lambda_identity 0.5 \
    --lambda_adversarial 3.0 \
    --use_lsgan \
    --use_mixed_precision
```

---

## ğŸ”„ æ¢å¤è®­ç»ƒ

```bash
python train_transformer3D/gan_train.py \
    --data_dir train/datas/file \
    --resume train_transformer3D/gan_checkpoints/best_model.pth
```

---

## ğŸ“Š ç›‘æ§è®­ç»ƒ

è®­ç»ƒå¼€å§‹åï¼Œå¯ä»¥ä½¿ç”¨TensorBoardç›‘æ§ï¼š

```bash
# Linux/Mac
tensorboard --logdir train_transformer3D/gan_logs

# Windows PowerShell
python -m tensorboard.main --logdir train_transformer3D/gan_logs
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ç›®å½•**ï¼šç¡®ä¿ `train/datas/file` åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
   - `front_feature.npy`
   - `front_keypoints.npy`
   - `front_metadata.json`
   - `video_feature.npy`
   - `video_keypoints.npy`
   - `video_metadata.json`

2. **å•å‘GANæ¶æ„**ï¼š
   - åªè®­ç»ƒG_ABï¼ˆä¾§é¢â†’æ­£é¢ï¼‰å’ŒD_Bï¼ˆåˆ¤æ–­æ­£é¢ç‰¹å¾ï¼‰
   - ä½¿ç”¨é…å¯¹æŸå¤±ï¼ˆç”Ÿæˆçš„æ­£é¢ç‰¹å¾ä¸çœŸå®æ­£é¢ç‰¹å¾çš„å·®å¼‚ï¼‰
   - è®­ç»ƒé€Ÿåº¦æ›´å¿«ï¼Œå‚æ•°æ›´å°‘

3. **å­¦ä¹ ç‡**ï¼š
   - ç”Ÿæˆå™¨å­¦ä¹ ç‡é€šå¸¸æ¯”åˆ¤åˆ«å™¨é«˜2-4å€
   - å¦‚æœåˆ¤åˆ«å™¨å‡†ç¡®ç‡å¿«é€Ÿè¾¾åˆ°100%ï¼Œå¯ä»¥é™ä½`lr_D`æˆ–å¢åŠ `lambda_adversarial`

4. **æ‰¹æ¬¡å¤§å°**ï¼š
   - å»ºè®®16-32
   - æ˜¾å­˜ä¸è¶³æ—¶å¯ä»¥å‡å°‘åˆ°8æˆ–16
