# åˆ¤åˆ«å™¨å‡†ç¡®ç‡100%é—®é¢˜è¯Šæ–­ä¸ä¿®å¤

## ğŸ” é—®é¢˜åˆ†æ

åˆ¤åˆ«å™¨å‡†ç¡®ç‡å¿«é€Ÿè¾¾åˆ°100%æ˜¯GANè®­ç»ƒçš„å¸¸è§é—®é¢˜ï¼Œé€šå¸¸è¡¨ç¤º**åˆ¤åˆ«å™¨å¤ªå¼ºï¼Œç”Ÿæˆå™¨å¤ªå¼±**ã€‚

### å¯èƒ½åŸå› 

1. **è®­ç»ƒä¸å¹³è¡¡**ï¼šåˆ¤åˆ«å™¨è®­ç»ƒæ¬¡æ•° > ç”Ÿæˆå™¨è®­ç»ƒæ¬¡æ•°
2. **å­¦ä¹ ç‡ä¸åˆé€‚**ï¼šç”Ÿæˆå™¨å­¦ä¹ ç‡å¤ªä½ï¼Œåˆ¤åˆ«å™¨å­¦ä¹ ç‡å¤ªé«˜
3. **å¯¹æŠ—æŸå¤±æƒé‡å¤ªå°**ï¼š`lambda_adversarial=1.0` vs `lambda_cycle=10.0`
4. **ç”Ÿæˆå™¨åˆå§‹åŒ–å·®**ï¼šç”Ÿæˆçš„ç‰¹å¾è´¨é‡å¤ªå·®ï¼Œåˆ¤åˆ«å™¨å¾ˆå®¹æ˜“åŒºåˆ†
5. **LSGANé˜ˆå€¼é—®é¢˜**ï¼šLSGANè¾“å‡ºæœªç»è¿‡sigmoidï¼Œç›´æ¥ä½¿ç”¨0.5é˜ˆå€¼å¯èƒ½ä¸åˆé€‚

## ğŸ“Š å½“å‰é…ç½®åˆ†æ

### è®­ç»ƒå¾ªç¯
- **åˆ¤åˆ«å™¨è®­ç»ƒ**ï¼šæ¯ä¸ªbatchè®­ç»ƒ2æ¬¡ï¼ˆD_Aå’ŒD_Bå„1æ¬¡ï¼‰
- **ç”Ÿæˆå™¨è®­ç»ƒ**ï¼šæ¯ä¸ªbatchè®­ç»ƒ1æ¬¡
- **æ¯”ä¾‹**ï¼šåˆ¤åˆ«å™¨:ç”Ÿæˆå™¨ = 2:1

### å­¦ä¹ ç‡
- `lr_G = 2e-4`ï¼ˆç”Ÿæˆå™¨ï¼‰
- `lr_D = 2e-4`ï¼ˆåˆ¤åˆ«å™¨ï¼‰
- **ç›¸åŒå­¦ä¹ ç‡**ï¼Œä½†ç”Ÿæˆå™¨éœ€è¦å­¦ä¹ æ›´å¤æ‚çš„å˜æ¢

### æŸå¤±æƒé‡
- `lambda_adversarial = 1.0`
- `lambda_cycle = 10.0`
- **å¾ªç¯ä¸€è‡´æ€§æŸå¤±å ä¸»å¯¼**ï¼Œå¯¹æŠ—æŸå¤±å¯èƒ½ä¸å¤Ÿå¼º

## âœ… ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šè°ƒæ•´è®­ç»ƒæ¯”ä¾‹ï¼ˆæ¨èï¼‰

**é—®é¢˜**ï¼šåˆ¤åˆ«å™¨è®­ç»ƒæ¬¡æ•°æ˜¯ç”Ÿæˆå™¨çš„2å€

**ä¿®å¤**ï¼šè®©ç”Ÿæˆå™¨è®­ç»ƒæ›´å¤šæ¬¡ï¼Œæˆ–è€…å‡å°‘åˆ¤åˆ«å™¨è®­ç»ƒé¢‘ç‡

```python
# æ¯Nä¸ªbatchæ‰è®­ç»ƒä¸€æ¬¡åˆ¤åˆ«å™¨
if batch_idx % 2 == 0:  # æ¯2ä¸ªbatchè®­ç»ƒä¸€æ¬¡åˆ¤åˆ«å™¨
    # è®­ç»ƒåˆ¤åˆ«å™¨
    ...
# æ¯ä¸ªbatchéƒ½è®­ç»ƒç”Ÿæˆå™¨
# è®­ç»ƒç”Ÿæˆå™¨
```

### æ–¹æ¡ˆ2ï¼šè°ƒæ•´å­¦ä¹ ç‡

**é—®é¢˜**ï¼šç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ä½¿ç”¨ç›¸åŒå­¦ä¹ ç‡

**ä¿®å¤**ï¼šæé«˜ç”Ÿæˆå™¨å­¦ä¹ ç‡ï¼Œé™ä½åˆ¤åˆ«å™¨å­¦ä¹ ç‡

```python
lr_G = 4e-4  # ç”Ÿæˆå™¨å­¦ä¹ ç‡æé«˜2å€
lr_D = 1e-4  # åˆ¤åˆ«å™¨å­¦ä¹ ç‡é™ä½2å€
```

### æ–¹æ¡ˆ3ï¼šè°ƒæ•´æŸå¤±æƒé‡

**é—®é¢˜**ï¼šå¯¹æŠ—æŸå¤±æƒé‡å¤ªå°

**ä¿®å¤**ï¼šå¢åŠ å¯¹æŠ—æŸå¤±æƒé‡

```python
lambda_adversarial = 2.0  # ä»1.0å¢åŠ åˆ°2.0
lambda_cycle = 10.0  # ä¿æŒä¸å˜
```

### æ–¹æ¡ˆ4ï¼šä¿®å¤LSGANå‡†ç¡®ç‡è®¡ç®—

**é—®é¢˜**ï¼šLSGANè¾“å‡ºæœªç»è¿‡sigmoidï¼Œç›´æ¥ä½¿ç”¨0.5é˜ˆå€¼ä¸åˆé€‚

**ä¿®å¤**ï¼šLSGANçš„è¾“å‡ºèŒƒå›´æ˜¯(-âˆ, +âˆ)ï¼Œåº”è¯¥ä½¿ç”¨0ä½œä¸ºé˜ˆå€¼

```python
if use_lsgan:
    # LSGANï¼šè¾“å‡ºæ¥è¿‘1ä¸ºçœŸå®ï¼Œæ¥è¿‘0ä¸ºç”Ÿæˆ
    # é˜ˆå€¼åº”è¯¥æ˜¯0ï¼Œè€Œä¸æ˜¯0.5
    correct_real = (pred_real > 0).sum().item()
    correct_fake = (pred_fake < 0).sum().item()
else:
    # BCEï¼šä½¿ç”¨sigmoidåï¼Œé˜ˆå€¼æ˜¯0.5
    pred_real_prob = torch.sigmoid(pred_real)
    pred_fake_prob = torch.sigmoid(pred_fake)
    correct_real = (pred_real_prob > 0.5).sum().item()
    correct_fake = (pred_fake_prob < 0.5).sum().item()
```

### æ–¹æ¡ˆ5ï¼šæ·»åŠ åˆ¤åˆ«å™¨æ­£åˆ™åŒ–

**é—®é¢˜**ï¼šåˆ¤åˆ«å™¨å¯èƒ½è¿‡æ‹Ÿåˆ

**ä¿®å¤**ï¼šæ·»åŠ æ¢¯åº¦æƒ©ç½šæˆ–æ ‡ç­¾å¹³æ»‘

```python
# æ ‡ç­¾å¹³æ»‘ï¼šçœŸå®æ ‡ç­¾ä»1.0æ”¹ä¸º0.9
loss_D_real = adversarial_loss_fn(pred_real, target_is_real=True, label_smoothing=0.1)
```

## ğŸ¯ æ¨èä¿®å¤ç»„åˆ

**ç«‹å³ä¿®å¤**ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ï¼š
1. âœ… ä¿®å¤LSGANå‡†ç¡®ç‡è®¡ç®—ï¼ˆæ–¹æ¡ˆ4ï¼‰
2. âœ… è°ƒæ•´å­¦ä¹ ç‡ï¼ˆæ–¹æ¡ˆ2ï¼‰ï¼š`lr_G=4e-4, lr_D=1e-4`
3. âœ… å¢åŠ å¯¹æŠ—æŸå¤±æƒé‡ï¼ˆæ–¹æ¡ˆ3ï¼‰ï¼š`lambda_adversarial=2.0`

**å¯é€‰ä¼˜åŒ–**ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰ï¼š
4. è°ƒæ•´è®­ç»ƒæ¯”ä¾‹ï¼ˆæ–¹æ¡ˆ1ï¼‰ï¼šæ¯2ä¸ªbatchè®­ç»ƒä¸€æ¬¡åˆ¤åˆ«å™¨
5. æ·»åŠ æ ‡ç­¾å¹³æ»‘ï¼ˆæ–¹æ¡ˆ5ï¼‰

## ğŸ“ å®æ–½æ­¥éª¤

1. ä¿®å¤LSGANå‡†ç¡®ç‡è®¡ç®—é€»è¾‘
2. è°ƒæ•´é»˜è®¤å­¦ä¹ ç‡å‚æ•°
3. è°ƒæ•´é»˜è®¤æŸå¤±æƒé‡å‚æ•°
4. æ·»åŠ è®­ç»ƒæ¯”ä¾‹æ§åˆ¶å‚æ•°ï¼ˆå¯é€‰ï¼‰
